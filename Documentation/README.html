<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>EnergyShield &lpar;ICCPS &apos;23&comma; Submission 251&rpar;</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="energyshield-iccps-23-submission-251">EnergyShield (ICCPS '23, Submission 251)</h1>
<p>EnergyShield is a framework for provably-safe offloading of neural network controllers at the edge. It is described in the paper:</p>
<blockquote>
<p><em>EnergyShield: Provably-Safe Offloading of Neural Network Controllers for Energy Efficiency.</em><br>
Mohanad Odema, James Ferlez, Goli Vaisi, Yasser Shoukry and Mohammad Abdullah Al Faruque. ICCPS 2023: 14th ACM/IEEE International Conference on Cyber-Physical Systems.</p>
</blockquote>
<p>also enclosed as <code>ICCPS23_251.pdf</code>, and hereafter referred to as [EnergyShield-ICCPS23].</p>
<p>This README describes how to replicate the results in [EnergyShield-ICCPS2023] using code packaged in a provided Docker image. This includes generating new experimental data from new Carla simulation instances and creating plots for three numerical experiments:</p>
<pre><code>(Experiment 1) Energy Efficiency and Safety Evaluation of EnergyShield through Carla Simulation runs (Section 5.2)
(Experiment 2) Performance Gains from EnergyShield given wireless channel variation (Section 5.3)
(Experiment 3) Generality to other neural network controllers (Section 5.4) 
</code></pre>
<h2 id="contents">Contents</h2>
<ol start="0">
<li>Terminology</li>
<li>System Requirements</li>
<li>Setup</li>
</ol>
<h2 id="0-terminology">0. Terminology</h2>
<p>This repeatability artifact uses <a href="https://docker.com">Docker</a>. We will use the following terminology throughout:</p>
<ul>
<li>The <strong>HOST</strong> will refer to the system running Docker (e.g. your laptop).</li>
<li>The <strong>CONTAINER</strong> will refer to the &quot;virtualized&quot; system created by Docker (this is where the code from the artifact is run).</li>
</ul>
<p>Commands meant to be executed inside the host or container will be prefixed with one of the respective comments:</p>
<pre><code class="language-Bash"><span class="hljs-comment"># HOST COMMANDS</span>
<span class="hljs-comment"># CONTAINER COMMANDS</span>
</code></pre>
<h2 id="1-system-requirements">1. System Requirements</h2>
<p><strong>HARDWARE (HOST):</strong></p>
<ol>
<li>An x86-64 CPU</li>
<li>32GB of RAM</li>
<li>An NVIDIA GPU with 8GB of VRAM <strong>(Geforce 20xx series or later; GTX 2080Ti and V100 cards were tested)</strong>; headless GPUs will work (e.g. servers and Amazon EC2/Microsoft Azure instances)</li>
<li>At least 100GB of free disk space</li>
</ol>
<p><strong>SOFTWARE (HOST):</strong></p>
<ol>
<li>Un-virtualized Linux operating system (tested on Ubuntu 20.04 but any distribution that meets the remaining requirements should work; headless installs will likewise work)</li>
<li>Official <a href="https://docs.nvidia.com/datacenter/tesla/tesla-installation-notes/index.html">Linux NVIDIA drivers</a> <strong>(version &gt;= 515.76 is **<em>REQUIRED</em>**)</strong></li>
<li>A recent version of <a href="https://docs.docker.com/engine/">Docker Engine</a> <strong>(version &gt;= 19.03)</strong>;  also known as <code>containerd</code> or Docker Server but <strong>not</strong> <a href="https://docker.com">Docker Desktop</a></li>
<li>A recent version of <code>git</code> on the path</li>
<li>The <code>bash</code> shell installed in <code>/bin/bash</code></li>
<li>A user account that can run Docker containers in priviledged mode (i.e. with the <a href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities"><code>--priviledged</code> switch</a>)</li>
</ol>
<blockquote>
<p><strong>WARNING:</strong> The NVIDIA driver version &gt;=515.76 is a <strong>STRICT REQUIREMENT</strong>. This repeatability artifact <strong>WILL NOT WORK</strong> unless the host has official NVIDIA drivers version 515.76 or higher installed.</p>
</blockquote>
<h2 id="2-setup">2. Setup</h2>
<h3 id="i-host-paths"><em>(i) Host Paths</em></h3>
<p>Choose an install location on the host:</p>
<pre><code class="language-Bash"><span class="hljs-comment"># HOST COMMANDS</span>
HOST_LOCATION=/path/to/someplace/convenient
<span class="hljs-built_in">cd</span> <span class="hljs-string">&quot;<span class="hljs-variable">$HOST_LOCATION</span>&quot;</span>
</code></pre>
<blockquote>
<p><strong>NOTE:</strong> All subsequent <strong>HOST</strong> paths in this readme are assumed to be relative to <code>$HOST_LOCATION</code>.</p>
</blockquote>
<h3 id="ii-starting-the-docker-container"><em>(ii) Starting the Docker Container</em></h3>
<p>To start the EnergyShield Docker container, exectute the following in a Bash shell on the host (from <code>$HOST_LOCATION</code>):</p>
<pre><code class="language-Bash"><span class="hljs-comment"># HOST COMMANDS</span>
git <span class="hljs-built_in">clone</span> --recursive https://github.com/MohanadOdema/EnergyShield
<span class="hljs-built_in">cd</span> EnergyShield
./dockerbuild.sh <span class="hljs-comment"># WARNING: downloads ~30GB of data, and may take &gt; 1 hour!</span>
./dockerrun.sh --interactive --start-carla
</code></pre>
<p>This should place you at a Bash shell inside a container with EnergyShield installed.</p>
<blockquote>
<p><strong>WARNING:</strong> if you exit the container's Bash shell, then the <strong>container and all experiments will stop</strong>. You may restart the container with the <strong>host</strong> command:</p>
<pre><code class="language-Bash"><span class="hljs-comment"># HOST COMMANDS</span>
./dockerrun.sh --interactive --start-carla
</code></pre>
</blockquote>
<h3 id="iii-container-paths"><em>(iii) Container Paths</em></h3>
<p>The container's Bash shell will have a prompt that looks like:</p>
<pre><code class="language-Bash">carla@ece2ade62bc5:~$ 
</code></pre>
<p>where <code>ece2ade62bc5</code> is a (unique) container id.</p>
<p>Change to the EnergyShield directory inside the container:</p>
<pre><code class="language-Bash"><span class="hljs-comment"># CONTAINER COMMANDS</span>
<span class="hljs-built_in">cd</span> /home/carla/EnergyShield
</code></pre>
<blockquote>
<p><strong>NOTE:</strong> All subsequent <strong>CONTAINER</strong> paths in this readme are assumed to be relative to <code>/home/carla/EnergyShield</code>, unless otherwise noted.</p>
</blockquote>
<h3 id="iv-results-paths"><em>(iv) Results Paths</em></h3>
<p>The output produced by subsequent experiment scripts will accessible from the <strong>HOST</strong> path:</p>
<pre><code class="language-Bash"><span class="hljs-variable">$HOST_LOCATION</span>/EnergyShield/container_results
</code></pre>
<p>This path is <a href="https://docs.docker.com/storage/bind-mounts/">bind-mounted</a> to <code>/home/carla/results</code> in the <strong>CONTAINER</strong>: i.e. the contents of one will mirror the contents of the other.</p>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>